<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
<meta name="author" content="Ed Arvelaez">
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<!-- <meta charset="utf-8" /> -->
<link id="stylesheetSyntax" rel="stylesheet" media="screen" href="css/shjs_darkblue.css">
<title>gameplay_js.txt.</title>
</head>
<body>

<table class="sh_javascript sh_sourceCode sh_wide" cellpadding="0px" cellspacing="0px"><tbody><tr><td class="sh_linenumber">1</td><td class="sh_syntax"><code><span class="sh_comment">/*</span></code></td></tr><tr><td class="sh_linenumber">2</td><td class="sh_syntax sh_linebetween"><code><span class="sh_comment"> * gameplay.js lics Game Demo</span></code></td></tr><tr><td class="sh_linenumber">3</td><td class="sh_syntax"><code><span class="sh_comment"> * Version 0.1.1, 09/22/2014</span></code></td></tr><tr><td class="sh_linenumber">4</td><td class="sh_syntax sh_linebetween"><code><span class="sh_comment"> * Written by Ed Arvelaez</span></code></td></tr><tr><td class="sh_linenumber">5</td><td class="sh_syntax"><code><span class="sh_comment"> *</span></code></td></tr><tr><td class="sh_linenumber">6</td><td class="sh_syntax sh_linebetween"><code><span class="sh_comment"> * Small showcase of an HTML+JavaScript game</span></code></td></tr><tr><td class="sh_linenumber">7</td><td class="sh_syntax"><code><span class="sh_comment"> */</span></code></td></tr><tr><td class="sh_linenumber">8</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">9</td><td class="sh_syntax"><code><span class="sh_keyword">var</span> GridSize <span class="sh_symbol">=</span> <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">10</td><td class="sh_syntax sh_linebetween"><code>  Small <span class="sh_symbol">:</span> <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">11</td><td class="sh_syntax"><code>    rows <span class="sh_symbol">:</span> <span class="sh_number">7</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">12</td><td class="sh_syntax sh_linebetween"><code>    columns <span class="sh_symbol">:</span> <span class="sh_number">6</span></code></td></tr><tr><td class="sh_linenumber">13</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">14</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">15</td><td class="sh_syntax"><code>  Medium <span class="sh_symbol">:</span> <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">16</td><td class="sh_syntax sh_linebetween"><code>    rows <span class="sh_symbol">:</span> <span class="sh_number">8</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">17</td><td class="sh_syntax"><code>    columns <span class="sh_symbol">:</span> <span class="sh_number">10</span> </code></td></tr><tr><td class="sh_linenumber">18</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">19</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">20</td><td class="sh_syntax sh_linebetween"><code>  Large <span class="sh_symbol">:</span> <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">21</td><td class="sh_syntax"><code>    rows <span class="sh_symbol">:</span> <span class="sh_number">10</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">22</td><td class="sh_syntax sh_linebetween"><code>    columns <span class="sh_symbol">:</span> <span class="sh_number">14</span></code></td></tr><tr><td class="sh_linenumber">23</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">24</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">25</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">26</td><td class="sh_syntax sh_linebetween"><code><span class="sh_keyword">var</span> StartTime <span class="sh_symbol">=</span> <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">27</td><td class="sh_syntax"><code>  Small <span class="sh_symbol">:</span> <span class="sh_number">60</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">28</td><td class="sh_syntax sh_linebetween"><code>  Medium <span class="sh_symbol">:</span> <span class="sh_number">80</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">29</td><td class="sh_syntax"><code>  Large <span class="sh_symbol">:</span> <span class="sh_number">120</span></code></td></tr><tr><td class="sh_linenumber">30</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">31</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">32</td><td class="sh_syntax sh_linebetween"><code><span class="sh_keyword">var</span> GameOver <span class="sh_symbol">=</span> <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">33</td><td class="sh_syntax"><code>  TimeOut <span class="sh_symbol">:</span> <span class="sh_number">0</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">34</td><td class="sh_syntax sh_linebetween"><code>  Win <span class="sh_symbol">:</span> <span class="sh_number">1</span></code></td></tr><tr><td class="sh_linenumber">35</td><td class="sh_syntax"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">36</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">37</td><td class="sh_syntax"><code><span class="sh_keyword">var</span> GamePlay <span class="sh_symbol">=</span> <span class="sh_cbracket">{}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">38</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">39</td><td class="sh_syntax"><code>GamePlay<span class="sh_symbol">.</span>grid <span class="sh_symbol">=</span> <span class="sh_symbol">[]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">40</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>nameGrid <span class="sh_symbol">=</span> <span class="sh_symbol">[]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">41</td><td class="sh_syntax"><code>GamePlay<span class="sh_symbol">.</span>table <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">42</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>names <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">43</td><td class="sh_syntax"><code>GamePlay<span class="sh_symbol">.</span>positionArray <span class="sh_symbol">=</span> <span class="sh_cbracket">{</span> <span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">44</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>faceCount <span class="sh_symbol">=</span> <span class="sh_number">16</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">45</td><td class="sh_syntax"><code>GamePlay<span class="sh_symbol">.</span>gridSize <span class="sh_symbol">=</span> <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">46</td><td class="sh_syntax sh_linebetween"><code>  rows <span class="sh_symbol">:</span> GridSize<span class="sh_symbol">.</span>Large<span class="sh_symbol">.</span>rows <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">47</td><td class="sh_syntax"><code>  columns <span class="sh_symbol">:</span> GridSize<span class="sh_symbol">.</span>Large<span class="sh_symbol">.</span>columns</code></td></tr><tr><td class="sh_linenumber">48</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">49</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">50</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>points <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">51</td><td class="sh_syntax"><code>GamePlay<span class="sh_symbol">.</span>pointsElement <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">52</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>pointsPerHit <span class="sh_symbol">=</span> <span class="sh_number">100</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">53</td><td class="sh_syntax"><code>GamePlay<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">=</span> <span class="sh_number">1</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">54</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>multiplierDuration <span class="sh_symbol">=</span> <span class="sh_number">3</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">55</td><td class="sh_syntax"><code>GamePlay<span class="sh_symbol">.</span>startTime <span class="sh_symbol">=</span> <span class="sh_number">60</span> <span class="sh_symbol">;</span> <span class="sh_comment">//Changes with grid size</span></code></td></tr><tr><td class="sh_linenumber">56</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>timeBonus <span class="sh_symbol">=</span> <span class="sh_number">100</span> <span class="sh_symbol">;</span> <span class="sh_comment">//Bonus for each second of time left</span></code></td></tr><tr><td class="sh_linenumber">57</td><td class="sh_syntax"><code>GamePlay<span class="sh_symbol">.</span>winBonus <span class="sh_symbol">=</span> <span class="sh_number">1000</span> <span class="sh_symbol">;</span> <span class="sh_comment">//Bonus for winning</span></code></td></tr><tr><td class="sh_linenumber">58</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">59</td><td class="sh_syntax"><code><span class="sh_symbol">(</span> <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">60</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">61</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">62</td><td class="sh_syntax sh_linebetween"><code><span class="sh_keyword">var</span> removeAllChildren <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pElement <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">63</td><td class="sh_syntax"><code><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">64</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">while</span> <span class="sh_symbol">(</span> pElement<span class="sh_symbol">.</span><span class="sh_function">hasChildNodes</span><span class="sh_symbol">())</span></code></td></tr><tr><td class="sh_linenumber">65</td><td class="sh_syntax"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">66</td><td class="sh_syntax sh_linebetween"><code>    pElement<span class="sh_symbol">.</span><span class="sh_function">removeChild</span><span class="sh_symbol">(</span> pElement<span class="sh_symbol">.</span>firstChild <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">67</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">68</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">69</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">70</td><td class="sh_syntax sh_linebetween"><code><span class="sh_keyword">var</span> randomBetween <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pLower <span class="sh_symbol">,</span> pUpper <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">71</td><td class="sh_syntax"><code><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">72</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">return</span> <span class="sh_predef_var">Math</span><span class="sh_symbol">.</span><span class="sh_function">floor</span><span class="sh_symbol">((</span> <span class="sh_predef_var">Math</span><span class="sh_symbol">.</span><span class="sh_function">random</span><span class="sh_symbol">()</span> <span class="sh_symbol">*</span> pUpper<span class="sh_symbol">)</span> <span class="sh_symbol">+</span> pLower <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">73</td><td class="sh_syntax"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">74</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">75</td><td class="sh_syntax"><code>GamePlay<span class="sh_symbol">.</span>names <span class="sh_symbol">=</span> <span class="sh_symbol">[</span></code></td></tr><tr><td class="sh_linenumber">76</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_string">"portrait0"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">77</td><td class="sh_syntax"><code>  <span class="sh_string">"portrait1"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">78</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_string">"portrait2"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">79</td><td class="sh_syntax"><code>  <span class="sh_string">"portrait3"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">80</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_string">"portrait4"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">81</td><td class="sh_syntax"><code>  <span class="sh_string">"portrait5"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">82</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_string">"portrait6"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">83</td><td class="sh_syntax"><code>  <span class="sh_string">"portrait7"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">84</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_string">"portrait8"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">85</td><td class="sh_syntax"><code>  <span class="sh_string">"portrait9"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">86</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_string">"portrait10"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">87</td><td class="sh_syntax"><code>  <span class="sh_string">"portrait11"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">88</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_string">"portrait12"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">89</td><td class="sh_syntax"><code>  <span class="sh_string">"portrait13"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">90</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_string">"portrait14"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">91</td><td class="sh_syntax"><code>  <span class="sh_string">"portrait15"</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">92</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_string">"portrait16"</span></code></td></tr><tr><td class="sh_linenumber">93</td><td class="sh_syntax"><code><span class="sh_symbol">]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">94</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">95</td><td class="sh_syntax"><code><span class="sh_comment">//Creates a grid with cards for the game.</span></code></td></tr><tr><td class="sh_linenumber">96</td><td class="sh_syntax sh_linebetween"><code><span class="sh_comment">//The height and width must not include the empty border around the board with cards.</span></code></td></tr><tr><td class="sh_linenumber">97</td><td class="sh_syntax"><code><span class="sh_comment">//Name count refers to how many kinds of cards there will be</span></code></td></tr><tr><td class="sh_linenumber">98</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>generateGameGrid <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">(</span></code></td></tr><tr><td class="sh_linenumber">99</td><td class="sh_syntax"><code>  pTable <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">100</td><td class="sh_syntax sh_linebetween"><code>  pGrid <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">101</td><td class="sh_syntax"><code>  pNameCount <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">102</td><td class="sh_syntax sh_linebetween"><code>  pNamesGrid <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">103</td><td class="sh_syntax"><code>  pPositionArray <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">104</td><td class="sh_syntax sh_linebetween"><code>  pHeight <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">105</td><td class="sh_syntax"><code>  pWidth</code></td></tr><tr><td class="sh_linenumber">106</td><td class="sh_syntax sh_linebetween"><code><span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">107</td><td class="sh_syntax"><code><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">108</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_function">removeAllChildren</span><span class="sh_symbol">(</span> pTable <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">109</td><td class="sh_syntax"><code>  Util<span class="sh_symbol">.</span><span class="sh_function">clearArray</span><span class="sh_symbol">(</span> pGrid <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">110</td><td class="sh_syntax sh_linebetween"><code>  Util<span class="sh_symbol">.</span><span class="sh_function">clearArray</span><span class="sh_symbol">(</span> pPositionArray <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">111</td><td class="sh_syntax"><code>  Util<span class="sh_symbol">.</span><span class="sh_function">clearArray</span><span class="sh_symbol">(</span> pNamesGrid <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">112</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">113</td><td class="sh_syntax"><code>  <span class="sh_keyword">var</span> namesArr <span class="sh_symbol">,</span> gridArr <span class="sh_symbol">,</span> namesToUse <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">114</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">115</td><td class="sh_syntax"><code>  namesToUse <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>names<span class="sh_symbol">.</span><span class="sh_function">slice</span><span class="sh_symbol">(</span> <span class="sh_number">0</span> <span class="sh_symbol">,</span> pNameCount <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">116</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">117</td><td class="sh_syntax"><code>  <span class="sh_comment">//Generate grids and table</span></code></td></tr><tr><td class="sh_linenumber">118</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> actualHeight <span class="sh_symbol">=</span> pHeight <span class="sh_symbol">+</span> <span class="sh_number">2</span> <span class="sh_symbol">,</span> actualWidth <span class="sh_symbol">=</span> pWidth <span class="sh_symbol">+</span> <span class="sh_number">2</span> <span class="sh_symbol">,</span> ii <span class="sh_symbol">,</span> jj <span class="sh_symbol">,</span> row <span class="sh_symbol">,</span> cell <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">119</td><td class="sh_syntax"><code>  <span class="sh_keyword">for</span> <span class="sh_symbol">(</span> ii <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span> ii <span class="sh_symbol">&lt;</span> actualHeight <span class="sh_symbol">;</span> ii <span class="sh_symbol">++</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">120</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">121</td><td class="sh_syntax"><code>    namesArr <span class="sh_symbol">=</span> <span class="sh_symbol">[]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">122</td><td class="sh_syntax sh_linebetween"><code>    gridArr <span class="sh_symbol">=</span> <span class="sh_symbol">[]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">123</td><td class="sh_syntax"><code>    row <span class="sh_symbol">=</span> pTable<span class="sh_symbol">.</span><span class="sh_function">insertRow</span><span class="sh_symbol">(</span>pTable<span class="sh_symbol">.</span>rows<span class="sh_symbol">.</span>length<span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">124</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_keyword">for</span> <span class="sh_symbol">(</span> jj <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span> jj <span class="sh_symbol">&lt;</span> actualWidth <span class="sh_symbol">;</span> jj <span class="sh_symbol">++</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">125</td><td class="sh_syntax"><code>    <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">126</td><td class="sh_syntax sh_linebetween"><code>      cell <span class="sh_symbol">=</span> row<span class="sh_symbol">.</span><span class="sh_function">insertCell</span><span class="sh_symbol">(</span>row<span class="sh_symbol">.</span>cells<span class="sh_symbol">.</span>length<span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">127</td><td class="sh_syntax"><code>      cell<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">'&amp;nbsp;'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">128</td><td class="sh_syntax sh_linebetween"><code>      cell<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">'portrait'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">129</td><td class="sh_syntax"><code>      </code></td></tr><tr><td class="sh_linenumber">130</td><td class="sh_syntax sh_linebetween"><code>      cell<span class="sh_symbol">.</span>row <span class="sh_symbol">=</span> ii <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">131</td><td class="sh_syntax"><code>      cell<span class="sh_symbol">.</span>column <span class="sh_symbol">=</span> jj <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">132</td><td class="sh_syntax sh_linebetween"><code>      </code></td></tr><tr><td class="sh_linenumber">133</td><td class="sh_syntax"><code>      gridArr<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span> <span class="sh_number">0</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">134</td><td class="sh_syntax sh_linebetween"><code>      namesArr<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span> <span class="sh_string">''</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">135</td><td class="sh_syntax"><code>    <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">136</td><td class="sh_syntax sh_linebetween"><code>    </code></td></tr><tr><td class="sh_linenumber">137</td><td class="sh_syntax"><code>    pGrid<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span> gridArr <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">138</td><td class="sh_syntax sh_linebetween"><code>    pNamesGrid<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span> namesArr <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">139</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">140</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">141</td><td class="sh_syntax"><code>  <span class="sh_comment">//Figure out places to fill</span></code></td></tr><tr><td class="sh_linenumber">142</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> places <span class="sh_symbol">=</span> <span class="sh_symbol">[]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">143</td><td class="sh_syntax"><code>  <span class="sh_keyword">for</span> <span class="sh_symbol">(</span> ii <span class="sh_symbol">=</span> <span class="sh_number">1</span> <span class="sh_symbol">;</span> ii <span class="sh_symbol">&lt;</span> actualHeight <span class="sh_symbol">-</span> <span class="sh_number">1</span> <span class="sh_symbol">;</span> ii <span class="sh_symbol">++</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">144</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">145</td><td class="sh_syntax"><code>    <span class="sh_keyword">for</span> <span class="sh_symbol">(</span> jj <span class="sh_symbol">=</span> <span class="sh_number">1</span> <span class="sh_symbol">;</span> jj <span class="sh_symbol">&lt;</span> actualWidth <span class="sh_symbol">-</span> <span class="sh_number">1</span> <span class="sh_symbol">;</span> jj <span class="sh_symbol">++</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">146</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">147</td><td class="sh_syntax"><code>      places<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">148</td><td class="sh_syntax sh_linebetween"><code>        element <span class="sh_symbol">:</span> <span class="sh_keyword">null</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">149</td><td class="sh_syntax"><code>        row <span class="sh_symbol">:</span> ii <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">150</td><td class="sh_syntax sh_linebetween"><code>        column <span class="sh_symbol">:</span> jj</code></td></tr><tr><td class="sh_linenumber">151</td><td class="sh_syntax"><code>      <span class="sh_cbracket">}</span><span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">152</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">153</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">154</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">155</td><td class="sh_syntax"><code>  <span class="sh_comment">//Create a hash for arrays of positions, sorted by name</span></code></td></tr><tr><td class="sh_linenumber">156</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">for</span> <span class="sh_symbol">(</span> ii <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span> ii <span class="sh_symbol">&lt;</span> namesToUse<span class="sh_symbol">.</span>length <span class="sh_symbol">;</span> ii <span class="sh_symbol">++</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">157</td><td class="sh_syntax"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">158</td><td class="sh_syntax sh_linebetween"><code>    pPositionArray<span class="sh_symbol">[</span> namesToUse<span class="sh_symbol">[</span> ii <span class="sh_symbol">]]</span> <span class="sh_symbol">=</span> <span class="sh_symbol">[]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">159</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">160</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">161</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">162</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">163</td><td class="sh_syntax"><code>  <span class="sh_keyword">var</span> name <span class="sh_symbol">,</span> random <span class="sh_symbol">,</span> place <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">164</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">165</td><td class="sh_syntax"><code>  <span class="sh_keyword">while</span> <span class="sh_symbol">(</span> places<span class="sh_symbol">.</span>length <span class="sh_symbol">&gt;</span> <span class="sh_number">0</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">166</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">167</td><td class="sh_syntax"><code>    ii <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">168</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_keyword">while</span> <span class="sh_symbol">((</span> ii <span class="sh_symbol">&lt;</span> namesToUse<span class="sh_symbol">.</span>length <span class="sh_symbol">)</span> <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">(</span> places<span class="sh_symbol">.</span>length <span class="sh_symbol">&gt;</span> <span class="sh_number">0</span> <span class="sh_symbol">))</span></code></td></tr><tr><td class="sh_linenumber">169</td><td class="sh_syntax"><code>    <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">170</td><td class="sh_syntax sh_linebetween"><code>      name <span class="sh_symbol">=</span> namesToUse<span class="sh_symbol">[</span> ii <span class="sh_symbol">]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">171</td><td class="sh_syntax"><code>      </code></td></tr><tr><td class="sh_linenumber">172</td><td class="sh_syntax sh_linebetween"><code>      random <span class="sh_symbol">=</span> <span class="sh_function">randomBetween</span><span class="sh_symbol">(</span> <span class="sh_number">0</span> <span class="sh_symbol">,</span> places<span class="sh_symbol">.</span>length <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">173</td><td class="sh_syntax"><code>      place <span class="sh_symbol">=</span> places<span class="sh_symbol">[</span> random <span class="sh_symbol">]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">174</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">175</td><td class="sh_syntax"><code>      cell <span class="sh_symbol">=</span> pTable<span class="sh_symbol">.</span>rows<span class="sh_symbol">[</span> place<span class="sh_symbol">.</span>row <span class="sh_symbol">].</span>cells<span class="sh_symbol">[</span> place<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">176</td><td class="sh_syntax sh_linebetween"><code>      cell<span class="sh_symbol">.</span>className <span class="sh_symbol">+=</span> <span class="sh_string">' '</span> <span class="sh_symbol">+</span> name <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">177</td><td class="sh_syntax"><code>      place<span class="sh_symbol">.</span>element <span class="sh_symbol">=</span> cell <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">178</td><td class="sh_syntax sh_linebetween"><code>      </code></td></tr><tr><td class="sh_linenumber">179</td><td class="sh_syntax"><code>      <span class="sh_comment">//pick the table element.</span></code></td></tr><tr><td class="sh_linenumber">180</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_comment">//assign it to the places array</span></code></td></tr><tr><td class="sh_linenumber">181</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">182</td><td class="sh_syntax sh_linebetween"><code>      pNamesGrid<span class="sh_symbol">[</span> place<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> place<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">=</span> name <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">183</td><td class="sh_syntax"><code>      pGrid<span class="sh_symbol">[</span> place<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> place<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">1</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">184</td><td class="sh_syntax sh_linebetween"><code>      pPositionArray<span class="sh_symbol">[</span> name <span class="sh_symbol">].</span><span class="sh_function">push</span><span class="sh_symbol">(</span> place <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">185</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">186</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_comment">//Remove the place from the places array</span></code></td></tr><tr><td class="sh_linenumber">187</td><td class="sh_syntax"><code>      places<span class="sh_symbol">.</span><span class="sh_function">splice</span><span class="sh_symbol">(</span> random <span class="sh_symbol">,</span> <span class="sh_number">1</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">188</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">189</td><td class="sh_syntax"><code>      <span class="sh_comment">//Repeat.</span></code></td></tr><tr><td class="sh_linenumber">190</td><td class="sh_syntax sh_linebetween"><code>      random <span class="sh_symbol">=</span> <span class="sh_function">randomBetween</span><span class="sh_symbol">(</span> <span class="sh_number">0</span> <span class="sh_symbol">,</span> places<span class="sh_symbol">.</span>length <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">191</td><td class="sh_syntax"><code>      place <span class="sh_symbol">=</span> places<span class="sh_symbol">[</span> random <span class="sh_symbol">]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">192</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">193</td><td class="sh_syntax"><code>      <span class="sh_comment">//pick the table element.</span></code></td></tr><tr><td class="sh_linenumber">194</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_comment">//assign it to the places array</span></code></td></tr><tr><td class="sh_linenumber">195</td><td class="sh_syntax"><code>      cell <span class="sh_symbol">=</span> pTable<span class="sh_symbol">.</span>rows<span class="sh_symbol">[</span> place<span class="sh_symbol">.</span>row <span class="sh_symbol">].</span>cells<span class="sh_symbol">[</span> place<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">196</td><td class="sh_syntax sh_linebetween"><code>      cell<span class="sh_symbol">.</span>className <span class="sh_symbol">+=</span> <span class="sh_string">' '</span> <span class="sh_symbol">+</span> name <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">197</td><td class="sh_syntax"><code>      place<span class="sh_symbol">.</span>element <span class="sh_symbol">=</span> cell <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">198</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">199</td><td class="sh_syntax"><code>      pNamesGrid<span class="sh_symbol">[</span> place<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> place<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">=</span> name <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">200</td><td class="sh_syntax sh_linebetween"><code>      pGrid<span class="sh_symbol">[</span> place<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> place<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">1</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">201</td><td class="sh_syntax"><code>      pPositionArray<span class="sh_symbol">[</span> name <span class="sh_symbol">].</span><span class="sh_function">push</span><span class="sh_symbol">(</span> place <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">202</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">203</td><td class="sh_syntax"><code>      <span class="sh_comment">//Remove the place from the places array</span></code></td></tr><tr><td class="sh_linenumber">204</td><td class="sh_syntax sh_linebetween"><code>      places<span class="sh_symbol">.</span><span class="sh_function">splice</span><span class="sh_symbol">(</span> random <span class="sh_symbol">,</span> <span class="sh_number">1</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">205</td><td class="sh_syntax"><code>      </code></td></tr><tr><td class="sh_linenumber">206</td><td class="sh_syntax sh_linebetween"><code>      ii <span class="sh_symbol">++</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">207</td><td class="sh_syntax"><code>    <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">208</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">209</td><td class="sh_syntax"><code>  <span class="sh_comment">//create a grid with height + 1 and width + 1.</span></code></td></tr><tr><td class="sh_linenumber">210</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">211</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">212</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">213</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">214</td><td class="sh_syntax sh_linebetween"><code><span class="sh_keyword">var</span> TD_ELEMENT <span class="sh_symbol">=</span> <span class="sh_string">'TD'</span> <span class="sh_symbol">,</span> SELECTED_CSS <span class="sh_symbol">=</span> <span class="sh_string">'selected'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">215</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">216</td><td class="sh_syntax sh_linebetween"><code><span class="sh_keyword">var</span> showPathEngine <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ActionEngine</span><span class="sh_symbol">(</span> <span class="sh_number">100</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span> </code></td></tr><tr><td class="sh_linenumber">217</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">218</td><td class="sh_syntax sh_linebetween"><code><span class="sh_comment">//This action takes care of the multiplier ticking.</span></code></td></tr><tr><td class="sh_linenumber">219</td><td class="sh_syntax"><code><span class="sh_comment">//It must be places in a second-wise ticker engine.</span></code></td></tr><tr><td class="sh_linenumber">220</td><td class="sh_syntax sh_linebetween"><code><span class="sh_keyword">var</span> multiplierAction <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Action</span><span class="sh_symbol">(</span></code></td></tr><tr><td class="sh_linenumber">221</td><td class="sh_syntax"><code>  <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pAction <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">222</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">223</td><td class="sh_syntax"><code>    pAction<span class="sh_symbol">.</span>duration <span class="sh_symbol">=</span> <span class="sh_number">3</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">224</td><td class="sh_syntax sh_linebetween"><code>    pAction<span class="sh_symbol">.</span>hits <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">225</td><td class="sh_syntax"><code>    pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">=</span> <span class="sh_number">1</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">226</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">227</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">228</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pAction <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">229</td><td class="sh_syntax"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">230</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">&gt;</span> <span class="sh_number">1</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">231</td><td class="sh_syntax"><code>    <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">232</td><td class="sh_syntax sh_linebetween"><code>      </code></td></tr><tr><td class="sh_linenumber">233</td><td class="sh_syntax"><code>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>duration <span class="sh_symbol">&gt;</span> <span class="sh_symbol">-</span><span class="sh_number">1</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">234</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">235</td><td class="sh_syntax"><code>        pAction<span class="sh_symbol">.</span>duration <span class="sh_symbol">--</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">236</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">237</td><td class="sh_syntax"><code>      </code></td></tr><tr><td class="sh_linenumber">238</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>duration <span class="sh_symbol">&lt;</span> <span class="sh_number">0</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">239</td><td class="sh_syntax"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">240</td><td class="sh_syntax sh_linebetween"><code>        <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">&gt;</span> <span class="sh_number">1</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">241</td><td class="sh_syntax"><code>        <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">242</td><td class="sh_syntax sh_linebetween"><code>          pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">--</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">243</td><td class="sh_syntax"><code>          console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>multiplierDuration <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">244</td><td class="sh_syntax sh_linebetween"><code>          pAction<span class="sh_symbol">.</span>duration <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>multiplierDuration <span class="sh_symbol">-</span> <span class="sh_number">1</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">245</td><td class="sh_syntax"><code>        <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">246</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">247</td><td class="sh_syntax"><code>      </code></td></tr><tr><td class="sh_linenumber">248</td><td class="sh_syntax sh_linebetween"><code>      pAction<span class="sh_symbol">.</span>element<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">'x'</span> <span class="sh_symbol">+</span> pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">249</td><td class="sh_syntax"><code>      </code></td></tr><tr><td class="sh_linenumber">250</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">&gt;</span> <span class="sh_number">1</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">251</td><td class="sh_syntax"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">252</td><td class="sh_syntax sh_linebetween"><code>        pAction<span class="sh_symbol">.</span>timeElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">+</span> pAction<span class="sh_symbol">.</span>duration <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">253</td><td class="sh_syntax"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">254</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_keyword">else</span></code></td></tr><tr><td class="sh_linenumber">255</td><td class="sh_syntax"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">256</td><td class="sh_syntax sh_linebetween"><code>        pAction<span class="sh_symbol">.</span>timeElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">257</td><td class="sh_syntax"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">258</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">259</td><td class="sh_syntax"><code>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">&lt;</span> <span class="sh_number">2</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">260</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">261</td><td class="sh_syntax"><code>        pAction<span class="sh_symbol">.</span>element<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">'multiplierTimesOne'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">262</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">263</td><td class="sh_syntax"><code>      <span class="sh_keyword">else</span> <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">===</span> <span class="sh_number">2</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">264</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">265</td><td class="sh_syntax"><code>        pAction<span class="sh_symbol">.</span>element<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">'multiplierTimesTwo'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">266</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">267</td><td class="sh_syntax"><code>      <span class="sh_keyword">else</span> <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">===</span> <span class="sh_number">3</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">268</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">269</td><td class="sh_syntax"><code>        pAction<span class="sh_symbol">.</span>element<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">'multiplierTimesThree'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">270</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">271</td><td class="sh_syntax"><code>      <span class="sh_keyword">else</span> <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">&gt;</span> <span class="sh_number">3</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">272</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">273</td><td class="sh_syntax"><code>        pAction<span class="sh_symbol">.</span>element<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">'multiplierTimesFour'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">274</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">275</td><td class="sh_syntax"><code>    <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">276</td><td class="sh_syntax sh_linebetween"><code>    </code></td></tr><tr><td class="sh_linenumber">277</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">278</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">279</td><td class="sh_syntax"><code>  <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pAction <span class="sh_symbol">)</span> <span class="sh_cbracket">{</span> <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">280</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pAction <span class="sh_symbol">)</span> <span class="sh_cbracket">{</span> <span class="sh_keyword">return</span> <span class="sh_keyword">false</span> <span class="sh_symbol">;</span> <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">281</td><td class="sh_syntax"><code><span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">282</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">283</td><td class="sh_syntax"><code>multiplierAction<span class="sh_symbol">.</span>handleHit <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">284</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">285</td><td class="sh_syntax"><code>  <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>multiplier <span class="sh_symbol">&lt;</span> <span class="sh_number">5</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">286</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">287</td><td class="sh_syntax"><code>    <span class="sh_keyword">this</span><span class="sh_symbol">.</span>multiplier <span class="sh_symbol">++</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">288</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">289</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">290</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">this</span><span class="sh_symbol">.</span>duration <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>multiplierDuration <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">291</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">292</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">293</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">294</td><td class="sh_syntax sh_linebetween"><code><span class="sh_keyword">var</span> victory <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">295</td><td class="sh_syntax"><code><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">296</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> rows <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>grid<span class="sh_symbol">.</span>length <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">297</td><td class="sh_syntax"><code>  <span class="sh_keyword">var</span> columns <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>grid<span class="sh_symbol">[</span> <span class="sh_number">0</span> <span class="sh_symbol">].</span>length <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">298</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> winFlag <span class="sh_symbol">=</span> <span class="sh_keyword">true</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">299</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">300</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> ii <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">,</span> jj <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">301</td><td class="sh_syntax"><code>  <span class="sh_keyword">while</span> <span class="sh_symbol">((</span> ii <span class="sh_symbol">&lt;</span> rows <span class="sh_symbol">)</span> <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">(</span> winFlag <span class="sh_symbol">))</span></code></td></tr><tr><td class="sh_linenumber">302</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">303</td><td class="sh_syntax"><code>    <span class="sh_keyword">while</span> <span class="sh_symbol">((</span> jj <span class="sh_symbol">&lt;</span> columns <span class="sh_symbol">)</span> <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">(</span> winFlag <span class="sh_symbol">))</span></code></td></tr><tr><td class="sh_linenumber">304</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">305</td><td class="sh_syntax"><code>      winFlag <span class="sh_symbol">=</span> <span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>grid<span class="sh_symbol">[</span> ii <span class="sh_symbol">][</span> jj <span class="sh_symbol">]</span> <span class="sh_symbol">===</span> <span class="sh_number">0</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">306</td><td class="sh_syntax sh_linebetween"><code>      jj <span class="sh_symbol">++</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">307</td><td class="sh_syntax"><code>    <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">308</td><td class="sh_syntax sh_linebetween"><code>    jj <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">309</td><td class="sh_syntax"><code>    ii <span class="sh_symbol">++</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">310</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">311</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">312</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">return</span> winFlag <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">313</td><td class="sh_syntax"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">314</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">315</td><td class="sh_syntax"><code><span class="sh_keyword">var</span> onTileClicked <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pEvent <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">316</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">317</td><td class="sh_syntax"><code>  <span class="sh_keyword">var</span> tileTd <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">318</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> selectedTile <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">319</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">320</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pEvent<span class="sh_symbol">.</span>target <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">(</span> pEvent<span class="sh_symbol">.</span>target<span class="sh_symbol">.</span>nodeName<span class="sh_symbol">.</span><span class="sh_function">toUpperCase</span><span class="sh_symbol">()</span> <span class="sh_symbol">===</span> TD_ELEMENT <span class="sh_symbol">)</span> <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">(</span> pEvent<span class="sh_symbol">.</span>target <span class="sh_symbol">!==</span> selectedTile <span class="sh_symbol">))</span></code></td></tr><tr><td class="sh_linenumber">321</td><td class="sh_syntax"><code>  <span class="sh_cbracket">{</span>  </code></td></tr><tr><td class="sh_linenumber">322</td><td class="sh_syntax sh_linebetween"><code>    tileTd <span class="sh_symbol">=</span> pEvent<span class="sh_symbol">.</span>target <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">323</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">324</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>grid<span class="sh_symbol">[</span> tileTd<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> tileTd<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">&lt;</span> <span class="sh_number">1</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">325</td><td class="sh_syntax"><code>    <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">326</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_comment">//Deselect</span></code></td></tr><tr><td class="sh_linenumber">327</td><td class="sh_syntax"><code>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">328</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">329</td><td class="sh_syntax"><code>        Util<span class="sh_symbol">.</span><span class="sh_function">removeClass</span><span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">,</span> SELECTED_CSS <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">330</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">331</td><td class="sh_syntax"><code>      selectedTile <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">332</td><td class="sh_syntax sh_linebetween"><code>      GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">333</td><td class="sh_syntax"><code>    <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">334</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_keyword">else</span> <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> selectedTile <span class="sh_symbol">===</span> <span class="sh_keyword">null</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">335</td><td class="sh_syntax"><code>    <span class="sh_cbracket">{</span> </code></td></tr><tr><td class="sh_linenumber">336</td><td class="sh_syntax sh_linebetween"><code>      selectedTile <span class="sh_symbol">=</span> tileTd <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">337</td><td class="sh_syntax"><code>      GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">=</span> tileTd <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">338</td><td class="sh_syntax sh_linebetween"><code>      GamePlay<span class="sh_symbol">.</span>selectedTile<span class="sh_symbol">.</span>className <span class="sh_symbol">+=</span> <span class="sh_string">' '</span> <span class="sh_symbol">+</span> SELECTED_CSS <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">339</td><td class="sh_syntax"><code>    <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">340</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_keyword">else</span></code></td></tr><tr><td class="sh_linenumber">341</td><td class="sh_syntax"><code>    <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">342</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_keyword">var</span> selectedName <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>nameGrid<span class="sh_symbol">[</span> selectedTile<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> selectedTile<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">343</td><td class="sh_syntax"><code>      <span class="sh_keyword">var</span> tileTdName <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>nameGrid<span class="sh_symbol">[</span> tileTd<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> tileTd<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">344</td><td class="sh_syntax sh_linebetween"><code>      </code></td></tr><tr><td class="sh_linenumber">345</td><td class="sh_syntax"><code>      <span class="sh_keyword">var</span> coordA <span class="sh_symbol">=</span> <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">346</td><td class="sh_syntax sh_linebetween"><code>        row <span class="sh_symbol">:</span> selectedTile<span class="sh_symbol">.</span>row <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">347</td><td class="sh_syntax"><code>        column <span class="sh_symbol">:</span> selectedTile<span class="sh_symbol">.</span>column</code></td></tr><tr><td class="sh_linenumber">348</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">349</td><td class="sh_syntax"><code>      </code></td></tr><tr><td class="sh_linenumber">350</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_keyword">var</span> coordB <span class="sh_symbol">=</span> <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">351</td><td class="sh_syntax"><code>        row <span class="sh_symbol">:</span> tileTd<span class="sh_symbol">.</span>row <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">352</td><td class="sh_syntax sh_linebetween"><code>        column <span class="sh_symbol">:</span> tileTd<span class="sh_symbol">.</span>column</code></td></tr><tr><td class="sh_linenumber">353</td><td class="sh_syntax"><code>      <span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">354</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">355</td><td class="sh_syntax"><code>      <span class="sh_keyword">if</span> <span class="sh_symbol">((</span> tileTdName <span class="sh_symbol">===</span> selectedName <span class="sh_symbol">)</span> <span class="sh_symbol">&amp;&amp;</span> <span class="sh_symbol">(</span> path <span class="sh_symbol">!==</span> <span class="sh_keyword">null</span> <span class="sh_symbol">))</span></code></td></tr><tr><td class="sh_linenumber">356</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">357</td><td class="sh_syntax"><code>        <span class="sh_keyword">var</span> path <span class="sh_symbol">=</span> PathFinder<span class="sh_symbol">.</span><span class="sh_function">getTwoTurnPath</span><span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>grid <span class="sh_symbol">,</span> coordA <span class="sh_symbol">,</span> coordB <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">358</td><td class="sh_syntax sh_linebetween"><code>        <span class="sh_comment">//Success</span></code></td></tr><tr><td class="sh_linenumber">359</td><td class="sh_syntax"><code>        </code></td></tr><tr><td class="sh_linenumber">360</td><td class="sh_syntax sh_linebetween"><code>        <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> path <span class="sh_symbol">!==</span> <span class="sh_keyword">null</span> <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">361</td><td class="sh_syntax"><code>        <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">362</td><td class="sh_syntax sh_linebetween"><code>          <span class="sh_comment">//AS Debug:</span></code></td></tr><tr><td class="sh_linenumber">363</td><td class="sh_syntax"><code>          GamePlay<span class="sh_symbol">.</span>nameGrid<span class="sh_symbol">[</span> selectedTile<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> selectedTile<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">364</td><td class="sh_syntax sh_linebetween"><code>          GamePlay<span class="sh_symbol">.</span>nameGrid<span class="sh_symbol">[</span> tileTd<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> tileTd<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">365</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">366</td><td class="sh_syntax sh_linebetween"><code>          GamePlay<span class="sh_symbol">.</span>grid<span class="sh_symbol">[</span> selectedTile<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> selectedTile<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">367</td><td class="sh_syntax"><code>          GamePlay<span class="sh_symbol">.</span>grid<span class="sh_symbol">[</span> tileTd<span class="sh_symbol">.</span>row <span class="sh_symbol">][</span> tileTd<span class="sh_symbol">.</span>column <span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">368</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">369</td><td class="sh_syntax"><code>          <span class="sh_keyword">var</span> showPathAction <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ShowPathAction</span><span class="sh_symbol">(</span> <span class="sh_number">4</span> <span class="sh_symbol">,</span> path <span class="sh_symbol">,</span> GamePlay<span class="sh_symbol">.</span>table <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">370</td><td class="sh_syntax sh_linebetween"><code>          </code></td></tr><tr><td class="sh_linenumber">371</td><td class="sh_syntax"><code>          GamePlay<span class="sh_symbol">.</span>points <span class="sh_symbol">+=</span> <span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>pointsPerHit <span class="sh_symbol">*</span> multiplierAction<span class="sh_symbol">.</span>multiplier <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">372</td><td class="sh_syntax sh_linebetween"><code>          GamePlay<span class="sh_symbol">.</span>pointsElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">+</span> GamePlay<span class="sh_symbol">.</span>points <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">373</td><td class="sh_syntax"><code>          </code></td></tr><tr><td class="sh_linenumber">374</td><td class="sh_syntax sh_linebetween"><code>          multiplierAction<span class="sh_symbol">.</span><span class="sh_function">handleHit</span><span class="sh_symbol">()</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">375</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">376</td><td class="sh_syntax sh_linebetween"><code>          showPathEngine<span class="sh_symbol">.</span>actions<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span> showPathAction <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">377</td><td class="sh_syntax"><code>          showPathEngine<span class="sh_symbol">.</span><span class="sh_function">start</span><span class="sh_symbol">()</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">378</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">379</td><td class="sh_syntax"><code>          <span class="sh_comment">//Deselect</span></code></td></tr><tr><td class="sh_linenumber">380</td><td class="sh_syntax sh_linebetween"><code>          Util<span class="sh_symbol">.</span><span class="sh_function">removeClass</span><span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">,</span> SELECTED_CSS <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">381</td><td class="sh_syntax"><code>          selectedTile <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">382</td><td class="sh_syntax sh_linebetween"><code>          GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">383</td><td class="sh_syntax"><code>          </code></td></tr><tr><td class="sh_linenumber">384</td><td class="sh_syntax sh_linebetween"><code>          <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> <span class="sh_function">victory</span><span class="sh_symbol">())</span></code></td></tr><tr><td class="sh_linenumber">385</td><td class="sh_syntax"><code>          <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">386</td><td class="sh_syntax sh_linebetween"><code>            <span class="sh_function">onGameOver</span><span class="sh_symbol">(</span> GameOver<span class="sh_symbol">.</span>Win <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">387</td><td class="sh_syntax"><code>          <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">388</td><td class="sh_syntax sh_linebetween"><code>        <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">389</td><td class="sh_syntax"><code>        <span class="sh_keyword">else</span></code></td></tr><tr><td class="sh_linenumber">390</td><td class="sh_syntax sh_linebetween"><code>        <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">391</td><td class="sh_syntax"><code>          Util<span class="sh_symbol">.</span><span class="sh_function">removeClass</span><span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">,</span> SELECTED_CSS <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">392</td><td class="sh_syntax sh_linebetween"><code>          selectedTile <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">393</td><td class="sh_syntax"><code>          GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">394</td><td class="sh_syntax sh_linebetween"><code>        <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">395</td><td class="sh_syntax"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">396</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_keyword">else</span></code></td></tr><tr><td class="sh_linenumber">397</td><td class="sh_syntax"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">398</td><td class="sh_syntax sh_linebetween"><code>        <span class="sh_comment">//Deselect</span></code></td></tr><tr><td class="sh_linenumber">399</td><td class="sh_syntax"><code>        Util<span class="sh_symbol">.</span><span class="sh_function">removeClass</span><span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">,</span> SELECTED_CSS <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">400</td><td class="sh_syntax sh_linebetween"><code>        selectedTile <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">401</td><td class="sh_syntax"><code>        GamePlay<span class="sh_symbol">.</span>selectedTile <span class="sh_symbol">=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">402</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">403</td><td class="sh_syntax"><code>    <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">404</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">405</td><td class="sh_syntax"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">406</td><td class="sh_syntax sh_linebetween"><code> </code></td></tr><tr><td class="sh_linenumber">407</td><td class="sh_syntax"><code><span class="sh_keyword">var</span> onGameOver <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pType <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">408</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">409</td><td class="sh_syntax"><code>  multiplierAction<span class="sh_symbol">.</span>state <span class="sh_symbol">=</span> ActionState<span class="sh_symbol">.</span>AbortRequested <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">410</td><td class="sh_syntax sh_linebetween"><code>  timerAction<span class="sh_symbol">.</span>state <span class="sh_symbol">=</span> ActionState<span class="sh_symbol">.</span>AbortRequested <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">411</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">412</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> gameScreen <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'gameScreen'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">413</td><td class="sh_syntax"><code>  <span class="sh_keyword">var</span> endOfGameScreen <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'endOfGameScreen'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">414</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> titleElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'divGameOver'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">415</td><td class="sh_syntax"><code>  <span class="sh_keyword">var</span> winInfoElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'winInfo'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">416</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> endPointsElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'spanEndPoints'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">417</td><td class="sh_syntax"><code>  <span class="sh_keyword">var</span> timeLeftElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'timeLeft'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">418</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> timeBonusElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'timeBonus'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">419</td><td class="sh_syntax"><code>  <span class="sh_keyword">var</span> winBonusElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'victoryBonus'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">420</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> totalElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'total'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">421</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">422</td><td class="sh_syntax sh_linebetween"><code>  gameScreen<span class="sh_symbol">.</span>style<span class="sh_symbol">.</span>display <span class="sh_symbol">=</span> <span class="sh_string">'none'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">423</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">424</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> timeBonus <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">,</span> victoryBonus <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">425</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">426</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> pType <span class="sh_symbol">===</span> GameOver<span class="sh_symbol">.</span>Win <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">427</td><td class="sh_syntax"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">428</td><td class="sh_syntax sh_linebetween"><code>    timeBonus <span class="sh_symbol">=</span> timerAction<span class="sh_symbol">.</span>time <span class="sh_symbol">*</span> GamePlay<span class="sh_symbol">.</span>timeBonus <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">429</td><td class="sh_syntax"><code>    titleElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">'You finished. Well done!'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">430</td><td class="sh_syntax sh_linebetween"><code>    winInfoElement<span class="sh_symbol">.</span>style<span class="sh_symbol">.</span>visibility <span class="sh_symbol">=</span> <span class="sh_string">'visible'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">431</td><td class="sh_syntax"><code>    endPointsElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">+</span> GamePlay<span class="sh_symbol">.</span>points <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">432</td><td class="sh_syntax sh_linebetween"><code>    timeLeftElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">+</span> timerAction<span class="sh_symbol">.</span>time <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">433</td><td class="sh_syntax"><code>    timeBonusElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">+</span> timeBonus <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">434</td><td class="sh_syntax sh_linebetween"><code>    victoryBonus <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>winBonus <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">435</td><td class="sh_syntax"><code>    winBonusElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">+</span> victoryBonus <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">436</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">437</td><td class="sh_syntax"><code>  <span class="sh_keyword">else</span></code></td></tr><tr><td class="sh_linenumber">438</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">439</td><td class="sh_syntax"><code>    titleElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">'Game Over'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">440</td><td class="sh_syntax sh_linebetween"><code>    winInfoElement<span class="sh_symbol">.</span>style<span class="sh_symbol">.</span>visibility <span class="sh_symbol">=</span> <span class="sh_string">'hidden'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">441</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">442</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">443</td><td class="sh_syntax"><code>  totalElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">+</span> <span class="sh_symbol">(</span> GamePlay<span class="sh_symbol">.</span>points <span class="sh_symbol">+</span> timeBonus <span class="sh_symbol">+</span> victoryBonus <span class="sh_symbol">)</span> <span class="sh_symbol">;</span>  </code></td></tr><tr><td class="sh_linenumber">444</td><td class="sh_syntax sh_linebetween"><code>  endOfGameScreen<span class="sh_symbol">.</span>style<span class="sh_symbol">.</span>display <span class="sh_symbol">=</span> <span class="sh_string">'block'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">445</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">446</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">447</td><td class="sh_syntax"><code> </code></td></tr><tr><td class="sh_linenumber">448</td><td class="sh_syntax sh_linebetween"><code><span class="sh_keyword">var</span> clockEngine <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ActionEngine</span><span class="sh_symbol">(</span> <span class="sh_number">1000</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">449</td><td class="sh_syntax"><code><span class="sh_keyword">var</span> timerAction <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Action</span><span class="sh_symbol">(</span></code></td></tr><tr><td class="sh_linenumber">450</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pAction <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">451</td><td class="sh_syntax"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">452</td><td class="sh_syntax sh_linebetween"><code>    pAction<span class="sh_symbol">.</span>time <span class="sh_symbol">=</span> GamePlay<span class="sh_symbol">.</span>startTime <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">453</td><td class="sh_syntax"><code>    pAction<span class="sh_symbol">.</span>element<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> pAction<span class="sh_symbol">.</span>time <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">454</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">455</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">456</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pAction <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">457</td><td class="sh_syntax"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">458</td><td class="sh_syntax sh_linebetween"><code>    pAction<span class="sh_symbol">.</span>time <span class="sh_symbol">--</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">459</td><td class="sh_syntax"><code>    pAction<span class="sh_symbol">.</span>element<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> pAction<span class="sh_symbol">.</span>time <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">460</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_comment">//Update the element</span></code></td></tr><tr><td class="sh_linenumber">461</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">462</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">463</td><td class="sh_syntax"><code>  <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pAction <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">464</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">465</td><td class="sh_syntax"><code>    <span class="sh_function">onGameOver</span><span class="sh_symbol">(</span> GameOver<span class="sh_symbol">.</span>TimeOut <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">466</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">467</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">468</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pAction <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">469</td><td class="sh_syntax"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">470</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_keyword">return</span> <span class="sh_symbol">(</span> pAction<span class="sh_symbol">.</span>time <span class="sh_symbol">&lt;</span> <span class="sh_number">1</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">471</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">472</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">473</td><td class="sh_syntax"><code><span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">474</td><td class="sh_syntax sh_linebetween"></td></tr><tr><td class="sh_linenumber">475</td><td class="sh_syntax"><code><span class="sh_keyword">var</span> tableListenerAdded <span class="sh_symbol">=</span> <span class="sh_keyword">false</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">476</td><td class="sh_syntax sh_linebetween"><code>GamePlay<span class="sh_symbol">.</span>generateGame <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pGameTable <span class="sh_symbol">,</span> pFaceCount <span class="sh_symbol">,</span> pRows <span class="sh_symbol">,</span> pColumns <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">477</td><td class="sh_syntax"><code><span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">478</td><td class="sh_syntax sh_linebetween"><code>  GamePlay<span class="sh_symbol">.</span>points <span class="sh_symbol">=</span> <span class="sh_number">0</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">479</td><td class="sh_syntax"><code>  GamePlay<span class="sh_symbol">.</span>table <span class="sh_symbol">=</span> pGameTable <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">480</td><td class="sh_syntax sh_linebetween"><code>  GamePlay<span class="sh_symbol">.</span>gridSize<span class="sh_symbol">.</span>rows <span class="sh_symbol">=</span> pRows <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">481</td><td class="sh_syntax"><code>  GamePlay<span class="sh_symbol">.</span>gridSize<span class="sh_symbol">.</span>columns <span class="sh_symbol">=</span> pColumns <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">482</td><td class="sh_syntax sh_linebetween"><code>  GamePlay<span class="sh_symbol">.</span>faceCount <span class="sh_symbol">=</span> pFaceCount <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">483</td><td class="sh_syntax"><code>  GamePlay<span class="sh_symbol">.</span>pointsElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'spanPoints'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">484</td><td class="sh_syntax sh_linebetween"><code>  GamePlay<span class="sh_symbol">.</span>pointsElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">+</span> GamePlay<span class="sh_symbol">.</span>points <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">485</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">486</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> multiplierElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'spanMultiplier'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">487</td><td class="sh_syntax"><code>  multiplierElement<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">'x1'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">488</td><td class="sh_syntax sh_linebetween"><code>  multiplierElement<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">'multiplierTimesOne'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">489</td><td class="sh_syntax"><code>  </code></td></tr><tr><td class="sh_linenumber">490</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_keyword">var</span> multiplierTimer <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'spanMultiplierTime'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">491</td><td class="sh_syntax"><code>  multiplierTimer<span class="sh_symbol">.</span>innerHTML <span class="sh_symbol">=</span> <span class="sh_string">''</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">492</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">493</td><td class="sh_syntax"><code>  GamePlay<span class="sh_symbol">.</span><span class="sh_function">generateGameGrid</span><span class="sh_symbol">(</span></code></td></tr><tr><td class="sh_linenumber">494</td><td class="sh_syntax sh_linebetween"><code>    GamePlay<span class="sh_symbol">.</span>table <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">495</td><td class="sh_syntax"><code>    GamePlay<span class="sh_symbol">.</span>grid <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">496</td><td class="sh_syntax sh_linebetween"><code>    GamePlay<span class="sh_symbol">.</span>faceCount <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">497</td><td class="sh_syntax"><code>    GamePlay<span class="sh_symbol">.</span>nameGrid <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">498</td><td class="sh_syntax sh_linebetween"><code>    GamePlay<span class="sh_symbol">.</span>positionArray <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">499</td><td class="sh_syntax"><code>    GamePlay<span class="sh_symbol">.</span>gridSize<span class="sh_symbol">.</span>rows <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">500</td><td class="sh_syntax sh_linebetween"><code>    GamePlay<span class="sh_symbol">.</span>gridSize<span class="sh_symbol">.</span>columns</code></td></tr><tr><td class="sh_linenumber">501</td><td class="sh_syntax"><code>  <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">502</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">503</td><td class="sh_syntax"><code>  <span class="sh_keyword">if</span> <span class="sh_symbol">(</span> <span class="sh_symbol">!</span> tableListenerAdded <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">504</td><td class="sh_syntax sh_linebetween"><code>  <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">505</td><td class="sh_syntax"><code>    tableListenerAdded <span class="sh_symbol">=</span> <span class="sh_keyword">true</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">506</td><td class="sh_syntax sh_linebetween"><code>    Util<span class="sh_symbol">.</span><span class="sh_function">addEventListener</span><span class="sh_symbol">(</span></code></td></tr><tr><td class="sh_linenumber">507</td><td class="sh_syntax"><code>      GamePlay<span class="sh_symbol">.</span>table <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">508</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pEvent <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">509</td><td class="sh_syntax"><code>      <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">510</td><td class="sh_syntax sh_linebetween"><code>        <span class="sh_comment">//Here we will manage clicks.</span></code></td></tr><tr><td class="sh_linenumber">511</td><td class="sh_syntax"><code>        <span class="sh_function">onTileClicked</span><span class="sh_symbol">(</span> pEvent <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">512</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">513</td><td class="sh_syntax"><code>      <span class="sh_string">'click'</span></code></td></tr><tr><td class="sh_linenumber">514</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">515</td><td class="sh_syntax"><code>  <span class="sh_cbracket">}</span></code></td></tr><tr><td class="sh_linenumber">516</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">517</td><td class="sh_syntax"><code>  timerAction<span class="sh_symbol">.</span>element <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'spanTime'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">518</td><td class="sh_syntax sh_linebetween"><code>  multiplierAction<span class="sh_symbol">.</span>element <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'spanMultiplier'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">519</td><td class="sh_syntax"><code>  multiplierAction<span class="sh_symbol">.</span>timeElement <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'spanMultiplierTime'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">520</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">521</td><td class="sh_syntax"><code>  clockEngine<span class="sh_symbol">.</span>actions<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span> timerAction <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">522</td><td class="sh_syntax sh_linebetween"><code>  clockEngine<span class="sh_symbol">.</span>actions<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span> multiplierAction <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">523</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">524</td><td class="sh_syntax sh_linebetween"><code>  clockEngine<span class="sh_symbol">.</span><span class="sh_function">start</span><span class="sh_symbol">()</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">525</td><td class="sh_syntax"><code>  <span class="sh_comment">//Clock gets started here</span></code></td></tr><tr><td class="sh_linenumber">526</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">527</td><td class="sh_syntax"><code>  <span class="sh_keyword">var</span> playAgain <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'spanAgain'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">528</td><td class="sh_syntax sh_linebetween"><code>  </code></td></tr><tr><td class="sh_linenumber">529</td><td class="sh_syntax"><code>  Util<span class="sh_symbol">.</span><span class="sh_function">addEventListener</span><span class="sh_symbol">(</span></code></td></tr><tr><td class="sh_linenumber">530</td><td class="sh_syntax sh_linebetween"><code>    playAgain <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">531</td><td class="sh_syntax"><code>    <span class="sh_keyword">function</span> <span class="sh_symbol">(</span> pEvent <span class="sh_symbol">)</span></code></td></tr><tr><td class="sh_linenumber">532</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_cbracket">{</span></code></td></tr><tr><td class="sh_linenumber">533</td><td class="sh_syntax"><code> </code></td></tr><tr><td class="sh_linenumber">534</td><td class="sh_syntax sh_linebetween"><code>      <span class="sh_keyword">var</span> endOfGameScreen <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'endOfGameScreen'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">535</td><td class="sh_syntax"><code>      <span class="sh_keyword">var</span> settingsScreen <span class="sh_symbol">=</span> document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span> <span class="sh_string">'settingsScreen'</span> <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">536</td><td class="sh_syntax sh_linebetween"><code>      </code></td></tr><tr><td class="sh_linenumber">537</td><td class="sh_syntax"><code>      endOfGameScreen<span class="sh_symbol">.</span>style<span class="sh_symbol">.</span>display <span class="sh_symbol">=</span> <span class="sh_string">'none'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">538</td><td class="sh_syntax sh_linebetween"><code>      settingsScreen<span class="sh_symbol">.</span>style<span class="sh_symbol">.</span>display <span class="sh_symbol">=</span> <span class="sh_string">'block'</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">539</td><td class="sh_syntax"><code>      </code></td></tr><tr><td class="sh_linenumber">540</td><td class="sh_syntax sh_linebetween"><code>      timerAction<span class="sh_symbol">.</span>state <span class="sh_symbol">=</span> ActionState<span class="sh_symbol">.</span>Ready <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">541</td><td class="sh_syntax"><code>      multiplierAction<span class="sh_symbol">.</span>state <span class="sh_symbol">=</span> ActionState<span class="sh_symbol">.</span>Ready <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">542</td><td class="sh_syntax sh_linebetween"><code>      </code></td></tr><tr><td class="sh_linenumber">543</td><td class="sh_syntax"><code>    <span class="sh_cbracket">}</span> <span class="sh_symbol">,</span></code></td></tr><tr><td class="sh_linenumber">544</td><td class="sh_syntax sh_linebetween"><code>    <span class="sh_string">'click'</span></code></td></tr><tr><td class="sh_linenumber">545</td><td class="sh_syntax"><code>  <span class="sh_symbol">)</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">546</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">}</span> <span class="sh_symbol">;</span></code></td></tr><tr><td class="sh_linenumber">547</td><td class="sh_syntax"></td></tr><tr><td class="sh_linenumber">548</td><td class="sh_syntax sh_linebetween"><code><span class="sh_cbracket">}</span><span class="sh_symbol">)()</span> <span class="sh_symbol">;</span></code></td></tr></tbody></table>


</body></html>